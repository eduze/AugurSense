<div class="container-fluid">
  <helper-message [message]="message"></helper-message>

  <div class="box box-primary" *ngFor="let config of cameraConfigs; let j = index">
    <div class="box-header">
      <h4 class="box-title"> Configure point mappings for {{config.cameraId}}</h4>
    </div>
    <div class="box-body">
      <div class="row">
        <div class="col-md-6 col-sm-6 col-xs-12">
          <div class="box box-primary box-solid">
            <div class="box-body">
              <svg x="0" y="0" [attr.width]="config.cameraView.width" [attr.height]="config.cameraView.height"
                   class="center-block">
                <g>
                  <image [attr.xlink:href]="config.cameraView.view" x="0" y="0"
                         (click)="viewClicked($event, config)"></image>

                  <g *ngFor="let point of config.pointMapping.screenSpacePoints; let i = index">
                    <circle r="10" [attr.cx]="point.x" [attr.cy]="point.y" fill="red"></circle>
                    <text [attr.x]="point.x" [attr.y]="point.y" fill="yellow" font-size="20" text-anchor="middle">
                      {{i+1}}
                    </text>
                  </g>
                </g>
              </svg>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-sm-6 col-xs-12">
          <div class="box box-primary box-solid">
            <div class="box-body">
              <svg x="0" y="0" [attr.width]="globalMap.width" [attr.height]="globalMap.width" class="center-block"
                   *ngIf="globalMap">
                <g width="100%" height="100%">
                  <image [attr.xlink:href]="globalMap.image" x="0" y="0" (click)="mapClicked($event, config)"></image>

                  <g *ngFor="let point of config.pointMapping.worldSpacePoints; let i = index">
                    <circle r="10" [attr.cx]="point.x" [attr.cy]="point.y" fill="red"></circle>
                    <text [attr.x]="point.x" [attr.y]="point.y" fill="yellow" font-size="20" text-anchor="middle">
                      {{i+1}}
                    </text>
                  </g>
                </g>
              </svg>
            </div>
          </div>
        </div>

      </div>
    </div>
    <div class="box-footer">
      <button class="btn btn-danger pull-left" (click)="clear(config)">Clear</button>
      <button class="btn btn-primary pull-right" (click)="save(config)">Save</button>
    </div>
  </div>
</div>
